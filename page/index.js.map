{"version":3,"file":"index.js","sources":["../rvlog/index.js","index-source.js"],"sourcesContent":["export { makeNode }\n\nfunction makeNode () {\n  const node = {\n    parentPlane: null,\n    suppliers: null,\n    value: null,\n    planes: null,\n    proxy: null\n  }\n  node.proxy = new Proxy(node, nodeProxyHandler)\n\n  return node\n}\n\nfunction nodeByProxy (proxy) {\n  const oldGet = nodeProxyHandler.get\n  nodeProxyHandler.get = (node) => node\n  const node = proxy.noMatter\n  nodeProxyHandler.get = oldGet\n\n  return node\n}\n\nconst nodeProxyHandler = {\n  get (node, key, receiver) {\n    if (node.planes === null) {\n      node.planes = { __proto__: null }\n    }\n\n    if (!(key in node.planes)) {\n      node.planes[key] = makePlane(node, key)\n      garbageCandidates.add(node.planes[key])\n    }\n\n    return node.planes[key].proxy\n  }\n\n  // apply (query) {\n\n  // }\n}\n\nfunction database () {\n  return makeNode()\n}\n","import * as rv from 'rvlog'\n\nconsole.log(rv.makeNode);\n"],"names":["rv.makeNode"],"mappings":";;;EAEA,SAAS,QAAQ,IAAI;EACrB,EAAE,MAAM,IAAI,GAAG;EACf,IAAI,WAAW,EAAE,IAAI;EACrB,IAAI,SAAS,EAAE,IAAI;EACnB,IAAI,KAAK,EAAE,IAAI;EACf,IAAI,MAAM,EAAE,IAAI;EAChB,IAAI,KAAK,EAAE,IAAI;EACf,IAAG;EACH,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,EAAE,gBAAgB,EAAC;AAChD;EACA,EAAE,OAAO,IAAI;EACb,CAAC;AAUD;EACA,MAAM,gBAAgB,GAAG;EACzB,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE;EAC5B,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,EAAE;EAC9B,MAAM,IAAI,CAAC,MAAM,GAAG,EAAE,SAAS,EAAE,IAAI,GAAE;EACvC,KAAK;AACL;EACA,IAAI,IAAI,EAAE,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,EAAE;EAC/B,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,IAAI,EAAE,GAAG,EAAC;EAC7C,MAAM,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAC;EAC7C,KAAK;AACL;EACA,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK;EACjC,GAAG;AACH;EACA;AACA;EACA;EACA;;ECvCA,OAAO,CAAC,GAAG,CAACA,QAAW,CAAC;;;;;;"}